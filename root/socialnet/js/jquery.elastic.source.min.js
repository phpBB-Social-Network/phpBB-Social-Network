/* Elastic is jQuery plugin that grow and shrink your textareas automatically
 @version 1.6.11
 @author Jan Jarfalk
 @author-website http://www.unwrongest.com
 @modifiedBy Jan Kalach
 @modifiedBy-website http://phpbb3hacks.com
 @modified Added option to be useable without the ENTER.
 @modified Updated for jQuery 2.0
 @licence MIT License - http://www.opensource.org/licenses/mit-license.php
*/
(function(e){jQuery.fn.extend({elastic:function(p){var f="paddingTop paddingRight paddingBottom paddingLeft fontSize lineHeight fontFamily width fontWeight border-top-width border-right-width border-bottom-width border-left-width borderTopStyle borderTopColor borderRightStyle borderRightColor borderBottomStyle borderBottomColor borderLeftStyle borderLeftColor".split(" "),d={showNewLine:!0,useEnter:!0,enterReplacement:"<br />",parentElement:null,submitElement:null},d=e.extend(!0,{},d,p);d.useEnter||
(d.enterReplacement="");return this.each(function(){function l(){var m=Math.floor(parseInt(a.width(),10));c.width()!==m&&(c.css({width:m+"px"}),b(!0))}function j(c,d){var b=Math.floor(parseInt(c,10));a.height()!==b&&a.css({height:b+"px",overflow:d})}function b(b){var e=a.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,d.enterReplacement),f=c.html().replace(/<br>/ig,"<br />");if(b||e+"&nbsp;"!==f)c.html(e+"&nbsp;"),b="true"==a.attr("data-newline")&&a.is(":focus")?
c.height()+n:c.height(),3<Math.abs(b-a.height())&&(b>=g?j(g,"auto"):b<=h?j(h,"hidden"):j(b,"hidden"))}if("textarea"!==this.type||"elastic"===this.dataElastic)return!1;var a=jQuery(this),c=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),n=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),h=parseInt(a.css("height"),10)||3*n,g=parseInt(a.css("max-height"),10)||Number.MAX_VALUE;0>g&&(g=Number.MAX_VALUE);a.canBlur=!0;a.parentElement=
d.parentElement;a.submitElement=d.submitElement;a.parents(a.parentElement).find(a.submitElement).bind("mouseover",function(){a.canBlur=!1}).bind("mouseout",function(){a.canBlur=!0});c.appendTo(a.parent());for(var k=f.length;k--;)c.css(f[k].toString(),a.css(f[k].toString()));a.css({overflow:"hidden"});a.bind("keyup blur cut paste",function(){a.canBlur&&b(!0)});e(document).on("resize",window,l);e(document).on("resize",a,l);e(document).on("update",a,b);e(document).on("focusin",a,b);a.attr("data-newline",
d.showNewLine);a.dataElastic="elastic";a.bind("blur",function(){c.height()<g&&a.canBlur&&(c.height()>h?a.height(c.height()):a.height(h))});a.bind("input paste",function(){setTimeout(b,250)});b(!0)})}})})(jQuery);